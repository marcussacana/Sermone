@using System.Threading

<div class="loading-section">
    <h2 id="LoadTitle">@Engine.Language.Loading</h2>
    <div id="LoadDesc">@string.Format(Description, LoadStatus)</div>
    <div class="loader mt-5">
        <div class="loader-dot dot1"></div>
        <div class="loader-dot dot2"></div>
        <div class="loader-dot dot3"></div>
    </div>
    <input id="ReadyFlag" hidden>
</div>

@code { 

    [JSInvokable]
    public static async Task Initialize()
    {
        if (Engine.Compressor == null || Instance == null)
            return;

        if (await Program.EntryPoint())
            Instance.Refresh();

        await Tools.Initializer.LoadPlugins();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (Instance == null)
            Instance = this;

        await base.OnAfterRenderAsync(firstRender);
    }

    public static LoadingViewer Instance;

    string Description => Engine.Language.LoadingDesc;

    public string LoadStatus = Engine.Language.PluginList;

    public void Refresh() => this.StateHasChanged();


}
}